# PayrollNG Pro - Development Flowchart & Reference Guide

## PROJECT OVERVIEW
**Product:** 2026 Tax-Compliant Payroll System for Nigerian Businesses
**Timeline:** 30 Days
**Tech Stack:** Next.js 14, TypeScript, Prisma, PostgreSQL, Tailwind CSS, shadcn/ui, Paystack

---

## PHASE 1: FOUNDATION & SETUP (Days 1-5)

### 1.1 Initial Project Setup
```
START â†’ Create Next.js 14 Project with TypeScript
  â†“
Install Dependencies:
  - Prisma (database ORM)
  - NextAuth (authentication)
  - Tailwind CSS (styling)
  - shadcn/ui (UI components)
  - React Hook Form + Zod (forms & validation)
  - recharts (charts)
  - jsPDF (PDF generation)
  - SheetJS (Excel export)
  â†“
Create Folder Structure:
  /app/(auth) â†’ login, register pages
  /app/(dashboard) â†’ main app pages
  /components/ui â†’ reusable UI components
  /lib â†’ utility functions
  /prisma â†’ database schema
  â†“
Configure Environment Variables:
  DATABASE_URL
  NEXTAUTH_SECRET
  NEXTAUTH_URL
  PAYSTACK_SECRET_KEY
  PAYSTACK_PUBLIC_KEY
```

### 1.2 Database Schema Design
```
Create Prisma Schema with Tables:
  â†“
Companies Table:
  - id (UUID)
  - name (String)
  - tin (String, 10 digits)
  - email (String)
  - phone (String)
  - address (String)
  - employee_count (Int)
  - subscription_tier (Enum: FREE, STARTER, PRO, ENTERPRISE)
  - subscription_expires_at (DateTime)
  - created_at (DateTime)
  â†“
Employees Table:
  - id (UUID)
  - company_id (Foreign Key â†’ Companies)
  - full_name (String)
  - tin (String, 10 digits)
  - email (String)
  - phone (String)
  - basic_salary (Decimal)
  - housing_allowance (Decimal)
  - transport_allowance (Decimal)
  - other_allowances (Decimal)
  - employment_type (Enum: FULL_TIME, CONTRACT, PART_TIME)
  - state_of_residence (String)
  - start_date (DateTime)
  - is_active (Boolean)
  â†“
PayrollRuns Table:
  - id (UUID)
  - company_id (Foreign Key â†’ Companies)
  - month (Int, 1-12)
  - year (Int)
  - status (Enum: DRAFT, PROCESSED, REMITTED)
  - total_gross (Decimal)
  - total_paye (Decimal)
  - total_net (Decimal)
  - created_at (DateTime)
  â†“
EmployeePayslips Table:
  - id (UUID)
  - payroll_run_id (Foreign Key â†’ PayrollRuns)
  - employee_id (Foreign Key â†’ Employees)
  - gross_pay (Decimal)
  - basic_salary (Decimal)
  - housing_allowance (Decimal)
  - transport_allowance (Decimal)
  - other_allowances (Decimal)
  - paye (Decimal)
  - pension_employee (Decimal, 8%)
  - pension_employer (Decimal, 10%)
  - nhf (Decimal, 2.5%)
  - net_pay (Decimal)
  - created_at (DateTime)
  â†“
Users Table:
  - id (UUID)
  - email (String)
  - password (Hash)
  - role (Enum: OWNER, ACCOUNTANT, EMPLOYEE)
  - company_id (Foreign Key â†’ Companies, nullable)
  â†“
Run: npx prisma migrate dev
Run: npx prisma generate
```

### 1.3 Authentication System
```
Set up NextAuth:
  â†“
Create /app/api/auth/[...nextauth]/route.ts
  - Configure credentials provider
  - Hash passwords with bcrypt
  - Create JWT session
  â†“
Create Login Page (/app/(auth)/login)
  - Email + Password fields
  - Form validation with Zod
  - Error handling
  - "Register" link
  â†“
Create Register Page (/app/(auth)/register)
  - Company name
  - Email
  - Password
  - Confirm password
  - TIN (optional at signup)
  - Create company + owner user on submit
  â†“
Create Middleware (middleware.ts)
  - Protect /dashboard routes
  - Redirect unauthenticated users to /login
  - Redirect authenticated users away from /login
```

### 1.4 2026 PAYE Calculator Engine
```
Create /lib/paye-calculator.ts:
  â†“
Input: Annual Gross Salary (Number)
  â†“
Apply 2026 Tax Brackets (Progressive):
  IF salary â‰¤ â‚¦800,000 â†’ Tax = 0
  IF â‚¦800,001 - â‚¦2,200,000 â†’ Tax = 7% on amount above â‚¦800,000
  IF â‚¦2,200,001 - â‚¦8,999,000 â†’ Tax = â‚¦98,000 + 15% on amount above â‚¦2,200,000
  IF â‚¦9,000,000 - â‚¦12,999,000 â†’ Tax = â‚¦1,117,850 + 18% on amount above â‚¦9,000,000
  IF â‚¦13,000,000 - â‚¦24,999,000 â†’ Tax = â‚¦1,837,820 + 21% on amount above â‚¦13,000,000
  IF â‚¦25,000,000 - â‚¦49,999,000 â†’ Tax = â‚¦4,357,790 + 23% on amount above â‚¦25,000,000
  IF â‚¦50,000,000+ â†’ Tax = â‚¦10,107,710 + 25% on amount above â‚¦50,000,000
  â†“
Return: {
  annual_gross: Number,
  annual_tax: Number,
  monthly_tax: Number (annual_tax / 12),
  effective_rate: Percentage
}
  â†“
Test Cases:
  âœ“ â‚¦500,000/year â†’ â‚¦0 tax
  âœ“ â‚¦1,000,000/year â†’ â‚¦14,000 tax
  âœ“ â‚¦5,000,000/year â†’ â‚¦518,000 tax
  âœ“ â‚¦10,000,000/year â†’ â‚¦1,297,850 tax
  âœ“ â‚¦50,000,000/year â†’ â‚¦10,107,710 tax
```

### 1.5 Statutory Deductions Calculator
```
Create /lib/deductions-calculator.ts:
  â†“
Input: {
  basic_salary: Number,
  housing_allowance: Number,
  transport_allowance: Number,
  other_allowances: Number
}
  â†“
Calculate:
  gross_pay = basic + housing + transport + other
  â†“
  pension_employee = basic_salary Ã— 8%
  pension_employer = basic_salary Ã— 10%
  â†“
  nhf = basic_salary Ã— 2.5%
  â†“
  annual_gross = gross_pay Ã— 12
  annual_paye = calculatePAYE(annual_gross)
  monthly_paye = annual_paye / 12
  â†“
  net_pay = gross_pay - pension_employee - nhf - monthly_paye
  â†“
Return: {
  gross_pay: Number,
  paye: Number,
  pension_employee: Number,
  pension_employer: Number,
  nhf: Number,
  net_pay: Number,
  total_employer_cost: gross_pay + pension_employer
}
```

---

## PHASE 2: EMPLOYEE MANAGEMENT (Days 6-8)

### 2.1 Employee CRUD Operations
```
Create /app/(dashboard)/employees/page.tsx:
  â†“
Display Employee List:
  - Table with columns: Name, TIN, Email, Basic Salary, Status
  - Search by name/email
  - Filter by status (Active/Inactive)
  - "Add Employee" button
  â†“
Create /app/(dashboard)/employees/new/page.tsx:
  â†“
Employee Form Fields:
  - Full Name* (required)
  - TIN* (10 digits, validate format)
  - Email*
  - Phone
  - Basic Salary* (â‚¦)
  - Housing Allowance (â‚¦)
  - Transport Allowance (â‚¦)
  - Other Allowances (â‚¦)
  - Employment Type (dropdown: Full-time, Contract, Part-time)
  - State of Residence (dropdown: Lagos, Abuja, etc.)
  - Start Date*
  â†“
On Submit:
  â†’ Validate all fields with Zod
  â†’ Insert into Employees table
  â†’ Increment company employee_count
  â†’ Show success message
  â†’ Redirect to employees list
  â†“
Create /app/(dashboard)/employees/[id]/edit/page.tsx:
  - Same form, pre-filled with existing data
  - Update employee record on submit
  â†“
Add Delete Employee:
  - Set is_active = false (soft delete)
  - Decrement company employee_count
  - Confirm before delete
```

### 2.2 Bulk Employee Import
```
Create CSV Upload Feature:
  â†“
Upload CSV with columns:
  Full Name, TIN, Email, Phone, Basic Salary, Housing, Transport, Other, Employment Type, State, Start Date
  â†“
Parse CSV using Papaparse:
  â†’ Validate each row
  â†’ Show preview table with validation errors
  â†’ User can fix errors or skip invalid rows
  â†“
On Confirm:
  â†’ Bulk insert valid employees into database
  â†’ Show summary: X successful, Y failed
```

---

## PHASE 3: PAYROLL PROCESSING (Days 9-12)

### 3.1 Monthly Payroll Run
```
Create /app/(dashboard)/payroll/run/page.tsx:
  â†“
User Selects:
  - Month (dropdown: January - December)
  - Year (dropdown: 2026, 2027, etc.)
  â†“
Click "Run Payroll" Button:
  â†“
Backend Process (API Route: /api/payroll/run):
  1. Check if payroll already exists for this month/year
     â†’ If exists, show error: "Payroll already processed for this period"
  â†“
  2. Fetch all active employees for company
  â†“
  3. For each employee:
     â†’ Calculate gross_pay (basic + housing + transport + other)
     â†’ Calculate annual equivalent (gross_pay Ã— 12)
     â†’ Calculate PAYE using paye-calculator.ts
     â†’ Calculate pension_employee (basic Ã— 8%)
     â†’ Calculate pension_employer (basic Ã— 10%)
     â†’ Calculate NHF (basic Ã— 2.5%)
     â†’ Calculate net_pay (gross - paye - pension_employee - nhf)
  â†“
  4. Create PayrollRun record:
     - month, year, status = 'PROCESSED'
     - total_gross = sum of all gross_pay
     - total_paye = sum of all paye
     - total_net = sum of all net_pay
  â†“
  5. Create EmployeePayslip records (bulk insert)
  â†“
  6. Return payroll_run_id
  â†“
Frontend:
  â†’ Show loading spinner during processing
  â†’ On success, redirect to payroll summary page
  â†’ Display summary card:
    - Total Employees Processed: X
    - Total Gross Pay: â‚¦X,XXX,XXX
    - Total PAYE Deducted: â‚¦XXX,XXX
    - Total Net Pay: â‚¦X,XXX,XXX
  â†’ Show employee breakdown table
```

### 3.2 Payslip Generation (PDF)
```
Create /lib/payslip-generator.ts using jsPDF:
  â†“
Input: EmployeePayslip data + Employee data + Company data
  â†“
PDF Template Layout:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ [Company Logo]   PAYSLIP            â”‚
  â”‚ Company Name                        â”‚
  â”‚ Company TIN: XXXXXXXXXX             â”‚
  â”‚                                     â”‚
  â”‚ Employee: John Doe                  â”‚
  â”‚ TIN: XXXXXXXXXX                     â”‚
  â”‚ Month: January 2026                 â”‚
  â”‚                                     â”‚
  â”‚ EARNINGS                  AMOUNT    â”‚
  â”‚ Basic Salary           â‚¦XXX,XXX.XX  â”‚
  â”‚ Housing Allowance      â‚¦XXX,XXX.XX  â”‚
  â”‚ Transport Allowance    â‚¦XXX,XXX.XX  â”‚
  â”‚ Other Allowances       â‚¦XXX,XXX.XX  â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
  â”‚ Gross Pay              â‚¦XXX,XXX.XX  â”‚
  â”‚                                     â”‚
  â”‚ DEDUCTIONS                          â”‚
  â”‚ PAYE Tax              â‚¦XXX,XXX.XX   â”‚
  â”‚ Pension (8%)          â‚¦XXX,XXX.XX   â”‚
  â”‚ NHF (2.5%)            â‚¦XX,XXX.XX    â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
  â”‚ Total Deductions      â‚¦XXX,XXX.XX   â”‚
  â”‚                                     â”‚
  â”‚ NET PAY               â‚¦XXX,XXX.XX   â”‚
  â”‚                                     â”‚
  â”‚ Employer Contributions:             â”‚
  â”‚ Pension (10%)         â‚¦XXX,XXX.XX   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Create API Route: /api/payslips/[id]/download
  â†’ Generate PDF
  â†’ Return as blob
  â†“
Add Download Buttons:
  - Individual payslip download
  - Bulk download all payslips (ZIP file)
```

### 3.3 PAYE Schedule Report
```
Create /app/(dashboard)/reports/paye-schedule/page.tsx:
  â†“
User Selects:
  - Month
  - Year
  â†“
Generate PAYE Schedule Table:
  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ S/Nâ”‚ Employee Nameâ”‚ TIN        â”‚ Gross Income â”‚ PAYE Tax   â”‚ Net Pay     â”‚
  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 1  â”‚ John Doe     â”‚ 1234567890 â”‚ â‚¦500,000.00  â”‚ â‚¦45,000.00 â”‚ â‚¦415,000.00 â”‚
  â”‚ 2  â”‚ Jane Smith   â”‚ 0987654321 â”‚ â‚¦750,000.00  â”‚ â‚¦78,000.00 â”‚ â‚¦622,000.00 â”‚
  â”‚... â”‚ ...          â”‚ ...        â”‚ ...          â”‚ ...        â”‚ ...         â”‚
  â”œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ TOTAL:                          â”‚ â‚¦XX,XXX,XXX  â”‚ â‚¦X,XXX,XXX â”‚ â‚¦XX,XXX,XXX â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Export Options:
  1. Export to Excel (.xlsx) using SheetJS
  2. Export to PDF using jsPDF
  â†“
File naming: PAYE_Schedule_CompanyName_MMM_YYYY.xlsx
```

---

## PHASE 4: COMPLIANCE & REPORTING (Days 13-16)

### 4.1 Remittance Tracker Dashboard
```
Create /app/(dashboard)/compliance/page.tsx:
  â†“
Display Compliance Calendar:
  â†“
Tax Obligations Table:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Month/Year â”‚ Type     â”‚ Amount      â”‚ Due Date â”‚ Status   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Jan 2026   â”‚ PAYE     â”‚ â‚¦1,500,000  â”‚ Feb 10   â”‚ ğŸ”´ Overdueâ”‚
  â”‚ Jan 2026   â”‚ Pension  â”‚ â‚¦800,000    â”‚ Feb 15   â”‚ âš ï¸ Pendingâ”‚
  â”‚ Jan 2026   â”‚ NHF      â”‚ â‚¦200,000    â”‚ Feb 15   â”‚ âœ… Remittedâ”‚
  â”‚ Jan 2026   â”‚ NSITF    â”‚ â‚¦50,000     â”‚ Feb 15   â”‚ âš ï¸ Pendingâ”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Upcoming Deadlines Alert Box:
  "âš ï¸ URGENT: PAYE payment due in 5 days (Feb 10)"
  "â° Pension remittance due in 10 days (Feb 15)"
  â†“
For each obligation, add:
  - "Mark as Remitted" button
  - Date remitted input field
  - Receipt upload (optional)
  â†“
Visual Indicators:
  - Red: Overdue (past due date)
  - Yellow: Due within 7 days
  - Green: Remitted
  - Gray: Future obligation
```

### 4.2 Tax Clearance Certificate (TCC) Tracker
```
Add to Company Profile:
  â†“
TCC Fields:
  - TCC Number (String)
  - Issue Date (Date)
  - Expiry Date (Date)
  - Upload TCC Document (PDF)
  â†“
Display in Dashboard:
  - Days until expiry counter
  - Alert if expiring within 30 days
  â†“
Renewal Checklist:
  â–¡ File all outstanding PAYE returns
  â–¡ Clear all tax liabilities
  â–¡ Submit audited financial statements
  â–¡ Pay application fee (â‚¦25,000 for small companies)
  â–¡ Visit FIRS office or apply online
```

### 4.3 Annual Returns Generator
```
Create /app/(dashboard)/reports/annual-returns/page.tsx:
  â†“
User Selects Year (e.g., 2026)
  â†“
For Each Employee:
  â†’ Query all payslips for that year
  â†’ Calculate:
    - Total Gross Income (sum of all gross_pay)
    - Total PAYE Deducted (sum of all paye)
    - Total Pension Employee (sum of pension_employee)
    - Total Pension Employer (sum of pension_employer)
    - Total NHF (sum of nhf)
  â†“
Calculate Reliefs:
  - Consolidated Relief Allowance = Higher of (20% of gross income OR â‚¦200,000)
  - Plus additional â‚¦200,000
  â†“
Generate Individual Employee Annual Statement (PDF):
  - Employee details
  - Month-by-month breakdown table
  - Annual totals
  - Reliefs applied
  â†“
Generate Company Consolidated Return (Excel):
  - All employees summary
  - Total company tax burden
  - Export for filing with FIRS
```

---

## PHASE 5: DASHBOARD & UX (Days 17-19)

### 5.1 Main Dashboard
```
Create /app/(dashboard)/page.tsx:
  â†“
Top Row - Key Metrics (4 Cards):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Total Employees  â”‚ â”‚ Monthly Payroll  â”‚ â”‚ Total PAYE       â”‚ â”‚ Next Deadline    â”‚
  â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚
  â”‚      125         â”‚ â”‚  â‚¦12,500,000     â”‚ â”‚  â‚¦1,850,000      â”‚ â”‚  Feb 10, 2026    â”‚
  â”‚  +5 this month   â”‚ â”‚  +8% vs last mo  â”‚ â”‚  Due in 15 days  â”‚ â”‚  PAYE Remittance â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Middle Section - Charts (2 columns):
  Left: Line Chart - "Payroll Trend (Last 6 Months)"
    X-axis: Months (Aug, Sep, Oct, Nov, Dec, Jan)
    Y-axis: Amount (â‚¦)
    Lines: Total Payroll, PAYE, Net Pay
  â†“
  Right: Pie Chart - "Tax Breakdown (This Month)"
    Segments:
    - PAYE (largest slice)
    - Pension
    - NHF
    - Other
  â†“
Bottom Section - Quick Actions & Recent Activity:
  Quick Actions:
    [Run Payroll] [Add Employee] [View Reports] [Compliance]
  â†“
  Recent Payroll Runs Table:
    Month/Year | Employees | Gross Pay | PAYE | Status | Actions
    Jan 2026   | 125       | â‚¦12.5M    | â‚¦1.8M| âœ…     | [View] [Download]
```

### 5.2 Employee Self-Service Portal
```
Create Separate Employee Login Flow:
  â†“
Employee Dashboard (/app/(employee)/dashboard):
  â†“
Display:
  - Welcome message with employee name
  - Current month's payslip preview
  - Year-to-date summary:
    â€¢ Total Earnings: â‚¦XXX,XXX
    â€¢ Total PAYE Paid: â‚¦XX,XXX
    â€¢ Total Take-home: â‚¦XXX,XXX
  â†“
Payslips History:
  - List of all months employee has payslips
  - Click to view payslip details
  - Download button for each payslip
  â†“
Request Feature:
  - "Request Payslip Correction" button
  - Opens form: What needs correction? Message to employer
  - Sends notification to company owner
```

### 5.3 Public PAYE Calculator (Landing Page Tool)
```
Create /calculator (public, no login required):
  â†“
Calculator Interface:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Nigeria PAYE Calculator 2026               â”‚
  â”‚                                             â”‚
  â”‚  Annual Gross Salary: [â‚¦________]           â”‚
  â”‚  (or enter monthly: [â‚¦________] Ã— 12)       â”‚
  â”‚                                             â”‚
  â”‚  Basic Salary %: [60%] (optional)           â”‚
  â”‚                                             â”‚
  â”‚  [Calculate Tax] Button                     â”‚
  â”‚                                             â”‚
  â”‚  Results:                                   â”‚
  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚  Monthly Breakdown:                         â”‚
  â”‚  â€¢ Gross Pay: â‚¦XXX,XXX                      â”‚
  â”‚  â€¢ PAYE Tax: â‚¦XX,XXX (X.X%)                 â”‚
  â”‚  â€¢ Pension (8%): â‚¦XX,XXX                    â”‚
  â”‚  â€¢ NHF (2.5%): â‚¦X,XXX                       â”‚
  â”‚  â€¢ Net Pay: â‚¦XXX,XXX                        â”‚
  â”‚                                             â”‚
  â”‚  Annual Summary:                            â”‚
  â”‚  â€¢ Total Tax: â‚¦XXX,XXX                      â”‚
  â”‚  â€¢ Effective Rate: X.X%                     â”‚
  â”‚  â€¢ Take-home: â‚¦X,XXX,XXX                    â”‚
  â”‚                                             â”‚
  â”‚  [Save Calculation] â†’ Prompts signup        â”‚
  â”‚  [Share Results] â†’ Copy link                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
SEO Optimization:
  - Meta title: "Nigeria PAYE Calculator 2026 | Free Tax Calculator"
  - Meta description: "Calculate your PAYE tax under Nigeria's new 2026 tax law"
  - Keywords: Nigeria PAYE, tax calculator, 2026 tax rates
```

---

## PHASE 6: MONETIZATION (Days 20-22)

### 6.1 Subscription System
```
Define Plans in Database (enum):
  FREE: 5 employees max, 3 months history
  STARTER: 25 employees, â‚¦20,000/month
  PROFESSIONAL: 100 employees, â‚¦50,000/month
  ENTERPRISE: Unlimited, â‚¦150,000/month
  â†“
Create /app/(dashboard)/settings/subscription/page.tsx:
  â†“
Show Current Plan Card:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Current Plan: STARTER               â”‚
  â”‚ 12 of 25 employees used             â”‚
  â”‚ Next billing: Feb 15, 2026          â”‚
  â”‚ Amount: â‚¦20,000                     â”‚
  â”‚ [Upgrade Plan] [Cancel]             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Pricing Cards (4 columns):
  Each card shows:
  - Plan name
  - Price
  - Features list
  - Employee limit
  - [Select Plan] button
  â†“
Enforce Limits:
  - Check employee count before adding new employee
  - If at limit, show upgrade prompt
  - Block payroll run if over limit
```

### 6.2 Paystack Integration
```
Install: npm install @paystack/inline-js
  â†“
Create Checkout Flow:
  â†“
When user clicks [Upgrade Plan]:
  1. Redirect to /checkout?plan=STARTER
  â†“
  2. Show checkout page with:
     - Plan details
     - Amount
     - Payment frequency (Monthly/Annual - 15% discount)
  â†“
  3. Click [Pay Now]:
     â†’ Initialize Paystack Popup:
       email: user email
       amount: plan price Ã— 100 (kobo)
       reference: generate unique ref
       callback_url: /api/payment/verify
  â†“
  4. User completes payment on Paystack
  â†“
  5. Paystack redirects to callback_url with reference
  â†“
  6. Backend verifies payment:
     â†’ Call Paystack API: GET /transaction/verify/:reference
     â†’ If successful:
       - Update company subscription_tier
       - Set subscription_expires_at = now + 30 days
       - Create payment record
       - Send confirmation email
  â†“
  7. Redirect to dashboard with success message
  â†“
Set up Webhook (for recurring payments):
  - Endpoint: /api/webhooks/paystack
  - Listen for: charge.success, subscription.create, subscription.disable
  - Verify webhook signature
  - Update subscription status accordingly
```

### 6.3 Free Trial & Onboarding
```
After Registration:
  â†’ Set subscription_tier = FREE
  â†’ Set trial_ends_at = now + 14 days
  â†’ Show onboarding modal
  â†“
Onboarding Steps (Modal with progress bar):
  â†“
Step 1: Company Details
  - Prefilled: name, email (from registration)
  - Add: TIN, address, phone, industry
  - [Next]
  â†“
Step 2: Add First Employees
  - Option 1: Manually add 3 employees
  - Option 2: "Skip with sample data" (loads demo employees)
  - [Next]
  â†“
Step 3: Run Demo Payroll
  - Auto-select current month
  - [Run Payroll] button
  - Show processing â†’ Success!
  â†“
Step 4: View Payslips
  - Display first employee's payslip preview
  - [Download] button
  â†“
Step 5: Completion
  - "ğŸ‰ Congratulations! Your payroll system is ready"
  - "You're on a 14-day free trial"
  - [Go to Dashboard]
  â†“
Trial Expiry Logic:
  - Show countdown in header: "Trial expires in X days"
  - 3 days before expiry: Show upgrade prompt
  - On expiry: Lock features, show "Upgrade to Continue"
```

---

## PHASE 7: DEPLOYMENT (Days 23-25)

### 7.1 Production Setup
```
Deploy to Vercel:
  â†“
1. Connect GitHub repo to Vercel
  â†“
2. Configure Build Settings:
   - Framework: Next.js
   - Build Command: npm run build
   - Output Directory: .next
  â†“
3. Add Environment Variables:
   DATABASE_URL = postgresql://...  (Vercel Postgres)
   NEXTAUTH_SECRET = [generate secure string]
   NEXTAUTH_URL = https://yourdomain.com
   PAYSTACK_SECRET_KEY = sk_live_...
   PAYSTACK_PUBLIC_KEY = pk_live_...
  â†“
4. Set up Vercel Postgres:
   â†’ Create database
   â†’ Copy connection string to DATABASE_URL
   â†’ Run: npx prisma migrate deploy
  â†“
5. Configure Custom Domain:
   â†’ Add domain in Vercel settings
   â†’ Update DNS records (A, CNAME)
   â†’ Enable SSL (automatic)
  â†“
6. Enable Production Features:
   â†’ Vercel Analytics
   â†’ Vercel Speed Insights
   â†’ Error monitoring (optional: Sentry)
```

### 7.2 Testing Checklist
```
Manual Testing:
  â†“
Authentication:
  â–¡ Register new company
  â–¡ Login with correct credentials
  â–¡ Login fails with wrong password
  â–¡ Logout works
  â–¡ Protected routes redirect to login
  â†“
Employee Management:
  â–¡ Add employee with valid data
  â–¡ Add employee fails with invalid TIN
  â–¡ Edit employee details
  â–¡ Soft delete employee
  â–¡ Bulk import from CSV
  â†“
Payroll Processing:
  â–¡ Run payroll for current month
  â–¡ Verify PAYE calculations (test all tax brackets)
  â–¡ Verify pension calculations (8% employee, 10% employer)
  â–¡ Verify NHF calculation (2.5%)
  â–¡ Generate payslips (PDF download works)
  â–¡ Export PAYE schedule (Excel + PDF)
  â†“
Compliance:
  â–¡ Remittance tracker shows correct deadlines
  â–¡ Mark obligation as remitted
  â–¡ TCC expiry alerts work
  â†“
Payments:
  â–¡ Upgrade to paid plan
  â–¡ Payment successful â†’ subscription updated
  â–¡ Trial expires â†’ features locked
  â†“
Employee Portal:
  â–¡ Employee can login
  â–¡ Employee sees only their payslips
  â–¡ Employee can download payslips
  â†“
Public Calculator:
  â–¡ PAYE calculations accurate
  â–¡ Save calculation prompts signup
```

### 7.3 Launch Landing Page
```
Create Marketing Site (/app/(marketing)):
  â†“
Landing Page Structure:
  â†“
Hero Section:
  - Headline: "Never Miss Another PAYE Deadline Again"
  - Subheadline: "Nigeria's #1 2026 Tax-Compliant Payroll Software"
  - CTA: [Start 14-Day Free Trial] [Calculate Your Tax]
  - Hero image/screenshot
  â†“
Problem Section:
  - "Confused by the new 2026 tax law?"
  - Pain points: Complex calculations, deadline stress, penalty fears
  â†“
Solution Section:
  - "PayrollNG Pro handles everything automatically"
  - Feature highlights with icons:
    âœ“ Accurate 2026 PAYE calculations
    âœ“ Automatic payslip generation
    âœ“ Compliance deadline tracking
    âœ“ FIRS-ready reports
  â†“
How It Works (3 Steps):
  1. Add your employees
  2. Run monthly payroll (1 click)
  3. Download reports & payslips
  â†“
Pricing Preview:
  - "From â‚¦20,000/month for 25 employees"
  - [See Full Pricing]
  â†“
Free Calculator Section:
  - Embedded PAYE calculator
  - "Try our free calculator now"
  â†“
Testimonials:
  - 3-4 customer quotes (add after beta)
  â†“
FAQ Section:
  Q: Is this compliant with 2026 tax law?
  A: Yes, fully updated with latest PAYE brackets.
  
  Q: Can I import existing employees?
  A: Yes, bulk CSV import supported.
  
  Q: What if I miss a deadline?
  A: We send reminders 7 days before due date.
  â†“
Footer:
  - Company info
  - Links: Pricing, Features, Contact, Privacy, Terms
  - Social media icons
  â†“
SEO Setup:
  - Title: "PayrollNG Pro | 2026 Tax-Compliant Payroll Software Nigeria"
  - Description: "Automated payroll with accurate PAYE, pension, NHF calculations. FIRS-compliant reports. Free 14-day trial."
  - Keywords: Nigeria payroll software, PAYE calculator, 2026 tax compliance
```

---

## PHASE 8: GROWTH FEATURES (Days 26-30)

### 8.1 WhatsApp Integration (Optional)
```
Set up Twilio WhatsApp API:
  â†“
Features:
  - Send payslips via WhatsApp
  - Send deadline reminders
  - Bulk payslip distribution
  â†“
Add WhatsApp number field to Employee table
  â†“
Create Notification Settings:
  â–¡ Send payslips via WhatsApp
  â–¡ Send compliance reminders
  â–¡ Send payment confirmations
```

### 8.2 Tax Updates Feed
```
Create /app/(dashboard)/tax-updates/page.tsx:
  â†“
Display:
  - Latest FIRS announcements
  - Tax law changes
  - Compliance tips
  â†“
Admin can post updates:
  - Title
  - Content
  - Date
  - Tags (PAYE, VAT, etc.)
  â†“
Show notification badge when new updates
```

### 8.3 Accountant Collaboration
```
Add Role: ACCOUNTANT
  â†“
Company Owner can:
  - Invite accountant via email
  - Grant read-only access
  â†“
Accountant Login:
  - See list of all client companies
  - Switch between clients
  - View all payroll data
  - Download reports
  - Cannot edit/delete
  â†“
Permissions Matrix:
  OWNER: Full access
  ACCOUNTANT: Read-only
  EMPLOYEE: Own data only
```

---

## DEPLOYMENT CHECKLIST

```
Pre-Launch:
  â–¡ All environment variables set
  â–¡ Database migrations run
  â–¡ SSL certificate active
  â–¡ Custom domain configured
  â–¡ Payment webhooks tested
  â–¡ Email notifications working
  â–¡ Error tracking enabled
  â–¡ Analytics installed
  â†“
Launch Day:
  â–¡ Announce on LinkedIn
  â–¡ Post in Nairaland forums
  â–¡ Email 20 beta testers
  â–¡ Share on WhatsApp status
  â–¡ Google Ads campaign live
  â†“
Post-Launch (Week 1):
  â–¡ Monitor error logs daily
  â–¡ Respond to support queries
  â–¡ Collect user feedback
  â–¡ Fix critical bugs
  â–¡ Add testimonials to landing page
```

---

## REVENUE PROJECTIONS

```
Month 1 (Beta):
  10 companies Ã— â‚¦0 (free beta) = â‚¦0
  â†“
Month 2 (Soft Launch):
  50 signups
  30 convert to Starter (â‚¦20k) = â‚¦600,000
  5 convert to Pro (â‚¦50k) = â‚¦250,000
  TOTAL: â‚¦850,000
  â†“
Month 3 (Growth):
  150 total companies
  80 Starter = â‚¦1,600,000
  20 Pro = â‚¦1,000,000
  5 Enterprise = â‚¦750,000
  TOTAL: â‚¦3,350,000
  â†“
Month 6 Target:
  300-500 companies
  â‚¦5-10 million MRR
```

---

## SUCCESS METRICS

```
Track These KPIs:
  - User signups (daily)
  - Trial-to-paid conversion rate (target: 25%+)
  - Monthly Active Users (MAU)
  - Average payroll runs per company
  - Customer churn rate (target: <5%)
  - Customer support tickets
  - Net Promoter Score (NPS)
```

---

## CRITICAL REMINDERS

```
1. PAYE Calculation Accuracy:
   - Test with salary ranges: â‚¦500k, â‚¦1M, â‚¦5M, â‚¦10M, â‚¦50M
   - Cross-verify with FIRS tax tables
   - Add calculator tests in /lib/__tests__/
  â†“
2. Data Security:
   - Never log passwords
   - Hash all sensitive data
   - Use HTTPS only
   - Implement rate limiting
  â†“
3. User Experience:
   - Show loading states
   - Clear error messages
   - Mobile-responsive (test on 320px width)
   - Fast page loads (<2 seconds)
  â†“
4. Compliance:
   - Keep tax brackets updated
   - Monitor FIRS for law changes
   - Update calculator immediately if rates change
  â†“
5. Customer Support:
   - Respond to queries within 24 hours
   - Create knowledge base / FAQ
   - Consider live chat (Intercom/Tawk.to)
```

---

## TECH STACK REFERENCE

```
Frontend:
  â”œâ”€ Next.js 14 (App Router)
  â”œâ”€ TypeScript
  â”œâ”€ Tailwind CSS
  â””â”€ shadcn/ui components

Backend:
  â”œâ”€ Next.js API Routes
  â”œâ”€ Prisma ORM
  â””â”€ PostgreSQL (Vercel Postgres)

Integrations:
  â”œâ”€ Paystack (payments)
  â”œâ”€ jsPDF (PDF generation)
  â”œâ”€ SheetJS (Excel export)
  â”œâ”€ NextAuth (authentication)
  â””â”€ Papaparse (CSV parsing)

Deployment:
  â”œâ”€ Vercel (hosting)
  â”œâ”€ Vercel Postgres (database)
  â””â”€ Custom domain + SSL
```

---

## NEXT STEPS AFTER LAUNCH

```
Phase 9 (Month 2-3):
  - Multi-currency support (USD, GBP for diaspora)
  - Loan management module
  - Leave/attendance tracking
  - API for third-party integrations
  â†“
Phase 10 (Month 4-6):
  - Mobile app (React Native)
  - Biometric attendance
  - HR document management
  - Performance review module
  â†“
Long-term Vision:
  - Become full HRIS platform
  - Partner with banks for salary advances
  - Integrate with pension administrators
  - Expand to other African countries
```

---

## EMERGENCY CONTACTS & RESOURCES

```
Support Resources:
  - FIRS Official Website: https://www.firs.gov.ng
  - FIRS PAYE Tax Tables: Check for latest rates
  - Paystack Documentation: https://paystack.com/docs
  - Next.js Docs: https://nextjs.org/docs
  - Prisma Docs: https://www.prisma.io/docs
  
Development Tools:
  - Cursor AI: Use for code generation
  - GitHub: Version control
  - Vercel: Deployment platform
  - Postman: API testing
```

---

**END OF FLOWCHART**

Save this document as `PROJECT_GUIDE.md` in your project root.
Reference it whenever building features or if you get stuck.

Good luck building PayrollNG Pro! ğŸš€